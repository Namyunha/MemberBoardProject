<!DOCTYPE html>
<html lang="en">
<head>
  <th:block th:replace="SWPages/component/config"></th:block>
</head>
<body>
<div th:replace="SWPages/component/header :: header"></div>
<div th:replace="SWPages/component/nav :: nav"></div>
<div id="section">
  <div class="container">
    <h2 style="text-align: center">로그인</h2>
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="member-email" name="memberEmail">
        <label for="member-email">Email</label>
      </div>
      <div class="form-floating mb-3">
        <input type="password" class="form-control" id="member-password" name="memberPassword">
        <label for="member-password">Password</label>
      </div>
      <button class="btn btn-primary" onclick="login()">로그인</button>
      <button class="btn btn-danger" onclick="back()">뒤로가기</button>
  </div>
</div>
<div th:replace="SWPages/component/footer :: footer"></div>
</body>
<script th:inline="javascript">
  const back = () => {
    history.back();
  }
  const login = () => {
    const email = document.querySelector('input[name="memberEmail"]').value;
    const password = document.querySelector('input[name="memberPassword"]').value;
    axios ({
      method: "post",
      url: "/sw/member/login",
      data: {
        memberEmail: email,
        memberPassword: password
      }
    }).then(res => {
      alert(res.data.memberEmail+"님 반갑습니다");
      location.href="/SWPages";
    }).catch(err => {
      alert("로그인 실패")
    })
  }
</script>

</html>
